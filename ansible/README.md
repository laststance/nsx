# NSX Server Environment Setup

This Ansible project automates the setup of the deployment environment for the NSX application. It configures the server to accept deployments from GitHub Actions.

## Prerequisites

- Ansible installed
- SSH access to the target server

## Usage

1. Change `your_server_ip` in the `inventory.ini` file to your target server's IP address.

2. Run the playbook with the following command:

```bash
cd ansible
ansible-playbook playbook.yml -v
```

3. After the playbook completes, it will display the generated SSH private key.
   Register this key in your GitHub repository's Secrets as `SSH_PRIVATE_KEY`.

4. Set up the following secrets in GitHub repository's Settings → Secrets and variables → Actions:
   - `SSH_PRIVATE_KEY`: SSH private key generated by the playbook
   - `DEPLOY_HOST`: Server IP address or hostname

## Key Features

- Locale configuration
- Installation of required packages
- Node.js and PM2 installation
- Creation of deployment user
- SSH key generation for GitHub Actions
- PM2 auto-startup configuration

## Server Configuration

- Deploy user: deploy
- Application path: /home/deploy/nsx
- PM2 auto-startup enabled

## GitHub Actions Deployment

After this setup, the application will be automatically built and deployed to the server when pushing to the main branch or through manual workflow dispatch. The workflow is defined in the `.github/workflows/deploy.yml` file.
